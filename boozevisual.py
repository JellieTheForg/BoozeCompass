import pygame
import math
import time


# Your current location
your_lat = 43.643435266106145
your_lon = -79.5204522388619
heading = 0

stores = [
    (41.7618115, -82.6887335),
    (42.0330356, -82.5978878),
    (42.0352878, -82.9206903),
    (42.0380781, -82.7214369),
    (42.0938404, -83.1070511),
    (42.1739728, -82.8204057),
    (42.2493405, -83.058874),
    (42.2576585, -82.4319497),
    (42.2741759, -83.0058528),
    (42.2867435, -83.0164573),
    (42.2884536, -83.057199),
    (42.2932328, -82.6997598),
    (42.3055517, -82.8680625),
    (42.31360491, -83.00119932),
    (42.3154954, -82.9386565),
    (42.3166485, -83.0435156),
    (42.3333435, -81.9983057),
    (42.4037619, -82.1881458),
    (42.4316217, -82.219778),
    (42.4386297, -81.8872632),
    (42.5548848, -81.9835502),
    (42.5688043, -81.6834779),
    (42.5879666, -82.3865053),
    (42.5921173, -82.1804778),
    (42.625529, -80.4511222),
    (42.6462844, -80.8063704),
    (42.6631406, -81.5031939),
    (42.6647264, -81.2151555),
    (42.7455583, -80.5799939),
    (42.7468423, -81.7129033),
    (42.7716585, -80.987428),
    (42.7784331, -81.1771938),
    (42.7877113, -80.2014979),
    (42.820445, -82.4730123),
    (42.8385859, -80.3448709),
    (42.8480871, -80.2883628),
    (42.8538534, -80.4936577),
    (42.8620568, -80.7280248),
    (42.8812735, -82.1341746),
    (42.8823709, -81.0847153),
    (42.8857566, -79.0602043),
    (42.885775, -79.2551354),
    (42.8883409, -82.4530445),
    (42.9032155, -79.6155581),
    (42.9065344, -78.9422897),
    (42.9094529, -81.2975317),
    (42.9337665, -80.2933856),
    (42.9348996, -81.2244137),
    (42.9376732, -81.2802166),
    (42.9469785, -81.8785429),
    (42.947043, -81.6095053),
    (42.950015, -79.8564047),
    (42.9518727, -81.4226419),
    (42.9579407, -81.3314324),
    (42.9633949, -80.0500515),
    (42.9712543, -81.2376497),
    (42.974692, -82.405379),
    (42.9763726, -79.2392467),
    (42.9788817, -82.1202291),
    (42.9802108, -81.2518705),
    (42.9851243, -81.0488954),
    (42.985491, -81.2929143),
    (42.9862143, -80.6051127),
    (42.9866534, -82.3466157),
    (42.9912499, -82.406408),
    (43.0032211, -81.1743525),
    (43.003589, -81.2277443),
    (43.0090522, -81.3331515),
    (43.0151038, -82.3654717),
    (43.0168938, -79.2274982),
    (43.0274861, -81.2741298),
    (43.0386273, -80.8861178),
    (43.04592, -81.2587999),
    (43.0476939, -79.2783835),
    (43.0640446, -79.9602225),
    (43.0671835, -79.1196087),
    (43.0898136, -79.0833216),
    (43.0953431, -79.5379293),
    (43.0963925, -82.0009867),
    (43.1029802, -80.4273276),
    (43.1062322, -79.0729393),
    (43.1192118, -79.0984615),
    (43.1250713, -79.802489),
    (43.1348419, -80.7326153),
    (43.1364469, -80.2627977),
    (43.1376417, -79.2163553),
    (43.1534203, -79.2698326),
    (43.1616619, -79.2437432),
    (43.1640997, -81.8532253),
    (43.1649575, -81.6828957),
    (43.1667188, -79.4759182),
    (43.17262104, -80.24033598),
    (43.1747074, -79.7779227),
    (43.1784519, -79.2412686),
    (43.1816069, -80.2806744),
    (43.1891194, -81.4054019),
    (43.1908542, -79.8131189),
    (43.191874, -80.3842318),
    (43.1925034, -79.5618756),
    (43.1970414, -80.022102),
    (43.2046659, -79.2437493),
    (43.2050138, -79.8938257),
    (43.21716, -79.6415262),
    (43.2210462, -79.8615502),
    (43.2232972, -79.7462209),
    (43.2234181, -79.1195329),
    (43.2260536, -79.9538143),
    (43.2287097, -79.8368961),
    (43.2311747, -79.7655715),
    (43.2355057, -79.8764123),
    (43.2384258, -79.8015279),
    (43.2516716, -79.8133415),
    (43.2545179, -79.8909711),
    (43.2549078, -79.0716774),
    (43.2571822, -79.9411556),
    (43.2583547, -79.8709115),
    (43.2611318, -81.1430909),
    (43.3107172, -81.7524586),
    (43.3161997, -79.9114429),
    (43.3204256, -80.8391825),
    (43.3259472, -79.7955749),
    (43.3310383, -79.8194314),
    (43.3523369, -80.328247),
    (43.3524411, -81.4813151),
    (43.355343, -80.2876808),
    (43.35550162, -79.78545328),
    (43.3667792, -79.8224957),
    (43.3688662, -79.7553574),
    (43.369, -80.983179),
    (43.3703143, -80.9457198),
    (43.3866771, -80.7120986),
    (43.3907766, -80.3231821),
    (43.3928413, -79.8240546),
    (43.3930083, -80.3520748),
    (43.39313361, -80.43117387),
    (43.3943801, -79.7918528),
    (43.4112032, -79.7062755),
    (43.4191738, -80.3243053),
    (43.41922583, -80.45170027),
    (43.421452, -81.6189636),
    (43.4241903, -80.4829669),
    (43.4253388, -80.5530771),
    (43.439053, -80.5099451),
    (43.440584, -81.5004677),
    (43.447527, -79.7032635),
    (43.4494707, -80.4455343),
    (43.4521292, -80.4954718),
    (43.4579143, -79.6787239),
    (43.4605789, -80.474285),
    (43.4624236, -80.5220525),
    (43.4670083, -80.5683063),
    (43.4678104, -81.1956705),
    (43.4818164, -79.696432),
    (43.4850595, -79.7198625),
    (43.488519, -79.8587015),
    (43.5012039, -80.5337216),
    (43.5016907, -80.1877794),
    (43.5081314, -79.6325339),
    (43.5088296, -79.8873244),
    (43.51411524, -80.23945425),
    (43.5236501, -80.2871438),
    (43.5252243, -79.8684763),
    (43.5273896, -79.6749979),
    (43.5399213, -80.2446992),
    (43.5474241, -79.5898509),
    (43.5547754, -81.3917916),
    (43.5552829, -81.6914126),
    (43.557862, -79.5790929),
    (43.5586447, -79.7115912),
    (43.5609855, -80.9253633),
    (43.5675171, -80.2571051),
    (43.5680235, -79.6313056),
    (43.581938, -79.7579496),
    (43.5825927, -79.7176109),
    (43.5827027, -79.6215277),
    (43.5858724, -80.561913),
    (43.5926476, -79.5750689),
    (43.5936541, -79.5407635),
    (43.5972826, -79.7860982),
    (43.597375, -79.6432389),
    (43.6023828, -79.4993438),
    (43.6085303, -79.6534384),
    (43.6113689, -79.6013391),
    (43.6114769, -79.5806902),
    (43.6131217, -79.6886615),
    (43.6148872, -79.5575417),
    (43.6199421, -81.5377171),
    (43.6222041, -79.4819762),
    (43.6232825, -79.5182328),
    (43.6304954, -79.4822622),
    (43.6311749, -79.8770989),
    (43.63136563, -79.55386311),
    (43.6343449, -80.0308307),
    (43.6376026, -79.3998555),
    (43.6390699, -79.7147899),
    (43.6398556, -79.4197486),
    (43.6407583, -79.434742),
    (43.6421653, -79.5762351),
    (43.6425257, -79.3804546),
    (43.6435568, -79.3939667),
    (43.6443056, -79.3710295),
    (43.6450676, -79.3812245),
    (43.6455893, -79.7551898),
    (43.6465539, -79.3798853),
    (43.6472812, -79.4029079),
    (43.6483665, -79.5082306),
    (43.6486573, -79.381671),
    (43.6487718, -79.3722161),
    (43.649429, -79.3784302),
    (43.6496402, -79.4235196),
    (43.6498633, -79.3924057),
    (43.6498909, -79.9013408),
    (43.6510655, -79.3654134),
    (43.6517868, -79.4743874),
    (43.6547384, -79.3982022),
    (43.6553399, -79.4507672),
    (43.6558736, -79.4354848),
    (43.6559881, -79.4093893),
    (43.6560811, -79.8140469),
    (43.6565324, -79.3828452),
    (43.6582347, -79.3287763),
    (43.6596804, -79.3475018),
    (43.6604486, -79.3844341),
    (43.6615135, -79.5197696),
    (43.6618719, -79.4250958),
    (43.6621911, -79.3802435),
    (43.6644271, -79.3842109),
    (43.6644921, -79.4112448),
    (43.6652281, -79.4627459),
    (43.6655344, -79.3687993),
    (43.6661731, -79.4887638),
    (43.6669516, -79.3149933),
    (43.6682358, -79.3411191),
    (43.6692041, -79.3881592),
    (43.6700881, -79.3004266),
    (43.670747, -79.4729662),
    (43.6709153, -79.3852243),
    (43.6712, -79.42449),
    (43.6753756, -79.557143),
    (43.6754186, -79.4057248),
    (43.676989, -79.3559735),
    (43.6780656, -79.7192266),
    (43.6801475, -80.4286968),
    (43.6804767, -79.4334924),
    (43.6810059, -79.3333095),
    (43.6811081, -79.3905073),
    (43.681477, -79.2824707),
    (43.6829768, -79.8166433),
    (43.6830383, -79.5658755),
    (43.6841477, -79.4153394),
    (43.6857022, -79.7623739),
    (43.6867098, -79.3992581),
    (43.6888385, -79.4131321),
    (43.6910674, -79.2858594),
    (43.6966099, -79.3286441),
    (43.6975514, -79.4506444),
    (43.699838, -79.396632),
    (43.7039939, -79.3747801),
    (43.7041736, -79.4089294),
    (43.7057953, -79.3460276),
    (43.7072329, -79.399009),
    (43.7073371, -79.3946869),
    (43.7085776, -79.4747997),
    (43.7108728, -80.3881768),
    (43.7108861, -79.36002),
    (43.7125077, -79.7231544),
    (43.712663, -79.5546042),
    (43.7126925, -79.5311888),
    (43.7163914, -79.4463898),
    (43.7182841, -79.6374099),
    (43.7204373, -79.4308733),
    (43.7212518, -79.5103946),
    (43.7224167, -79.5963751),
    (43.7251122, -79.2319425),
    (43.726617, -79.2938817),
    (43.7268107, -79.7978447),
    (43.7288427, -81.6885758),
    (43.7308437, -79.7643438),
    (43.730962, -79.4193989),
    (43.7321624, -80.9679882),
    (43.7325126, -79.4045012),
    (43.7326263, -79.4548306),
    (43.7355318, -79.2481545),
    (43.7363347, -79.3459249),
    (43.7417071, -79.5845089),
    (43.7425946, -81.2504659),
    (43.75416608, -79.35666699),
    (43.7577834, -79.3140749),
    (43.7580199, -79.2324853),
    (43.75883265, -79.51951853),
    (43.7593143, -79.4664333),
    (43.7600542, -79.4111633),
    (43.7618669, -79.7212415),
    (43.7684703, -80.0609613),
    (43.7688696, -79.4124734),
    (43.7698549, -79.3843036),
    (43.7707478, -79.1840402),
    (43.7713858, -79.7788568),
    (43.7740622, -79.27971),
    (43.776747, -79.2631305),
    (43.7779901, -79.3440914),
    (43.7795363, -79.1384804),
    (43.7844597, -79.6252319),
    (43.7845758, -79.4775038),
    (43.7848741, -79.2896409),
    (43.7922361, -79.549075),
    (43.794094, -79.3294153),
    (43.7949348, -79.4188263),
    (43.7968481, -79.2047106),
    (43.8054203, -79.3841169),
    (43.808439, -79.4500363),
    (43.80846133, -79.27020021),
    (43.8189047, -79.1147594),
    (43.8328932, -80.8573644),
    (43.8350112, -79.2562788),
    (43.8418581, -79.0225501),
    (43.8423986, -79.4298294),
    (43.8449201, -79.555555),
    (43.8454402, -79.072538),
    (43.8486363, -79.4594546),
    (43.8486584, -79.5350674),
    (43.8496445, -79.3562437),
    (43.8564706, -79.3230005),
    (43.8592886, -78.9468546),
    (43.860634, -79.4881886),
    (43.862876, -79.7135574),
    (43.8636082, -79.023015),
    (43.8681878, -79.2282727),
    (43.8698517, -78.8499428),
    (43.869857, -79.8673329),
    (43.8742695, -79.2818048),
    (43.8767622, -78.9398473),
    (43.880527, -79.4384463),
    (43.8807009, -79.3925105),
    (43.8833733, -79.2615083),
    (43.8841085, -81.3079883),
    (43.8846209, -78.9126577),
    (43.8873667, -78.8758604),
    (43.891432, -81.3095756),
    (43.8971681, -79.028352),
    (43.898261, -80.3154568),
    (43.9022655, -79.2672264),
    (43.9039452, -80.1196094),
    (43.9055708, -78.8593608),
    (43.9061174, -78.808332),
    (43.9080283, -79.6534121),
    (43.9104478, -78.7130475),
    (43.9141422, -80.8705889),
    (43.9157685, -78.9602041),
    (43.9174616, -78.5871974),
    (43.919098, -78.8506727),
    (43.9208099, -80.0872773),
    (43.9278652, -79.4516512),
    (43.9336497, -79.5078488),
    (43.9428396, -78.8440642),
    (43.949154, -77.3653506),
    (43.95208, -78.293811),
    (43.9535184, -78.9605461),
    (43.9584159, -78.1677093),
    (43.9593776, -81.5156625),
    (43.96306, -78.90522),
    (43.9682162, -79.2647629),
    (43.9701555, -78.1997406),
    (43.9798313, -80.7353275),
    (43.9825373, -79.4644997),
    (43.9932514, -81.2850315),
    (44.0032687, -77.1512576),
    (44.0036273, -79.6778913),
    (44.0050641, -77.8879645),
    (44.0131952, -79.4165173),
    (44.019842, -79.8038867),
    (44.0202688, -79.4490287),
    (44.0388628, -81.1104318),
    (44.0411587, -77.7373871),
    (44.056104, -79.4855044),
    (44.062516, -79.4303542),
    (44.0740019, -79.482126),
    (44.0843605, -80.1854304),
    (44.0869789, -79.134903),
    (44.0893084, -78.3210549),
    (44.0945329, -78.9639377),
    (44.1004685, -78.6284593),
    (44.1039504, -77.5797369),
    (44.1077922, -79.5914994),
    (44.1337865, -81.147215),
    (44.1397209, -77.3843087),
    (44.1485831, -79.8829027),
    (44.1521208, -78.4487777),
    (44.1552474, -81.0053746),
    (44.1621946, -79.8259453),
    (44.1669336, -77.3578354),
    (44.175956, -80.8187051),
    (44.1762231, -81.6150675),
    (44.1779945, -80.3800386),
    (44.1871459, -77.4049007),
    (44.1894746, -79.7088314),
    (44.1949697, -77.0502849),
    (44.2016892, -77.5968926),
    (44.2018234, -77.8864784),
    (44.2191315, -76.6450207),
    (44.2330237, -76.4807516),
    (44.2344385, -79.4501715),
    (44.2393324, -76.5426892),
    (44.2409701, -76.5104471),
    (44.256458, -76.9611217),
    (44.2627618, -76.5746149),
    (44.2629804, -76.5013165),
    (44.2703527, -76.451476),
    (44.2823901, -78.3395276),
    (44.2931999, -78.29004176),
    (44.2986881, -78.5594108),
    (44.2994593, -77.5488209),
    (44.301023, -78.32149),
    (44.3031935, -81.0963018),
    (44.3069186, -77.7977304),
    (44.3072517, -81.2730966),
    (44.3084988, -79.5742602),
    (44.3088624, -77.9574636),
    (44.3121176, -79.3680015),
    (44.3143172, -79.2045343),
    (44.3217558, -80.6523342),
    (44.3256821, -80.1037658),
    (44.329541, -79.8901636),
    (44.3304587, -76.160745),
    (44.33064028, -78.33918863),
    (44.3371516, -79.6904635),
    (44.3372508, -79.6833942),
    (44.3483693, -78.766119),
    (44.3501191, -79.0377334),
    (44.3557915, -79.6509187),
    (44.3815156, -77.9813892),
    (44.3818232, -78.3832895),
    (44.3889311, -79.6924216),
    (44.392501, -79.5330054),
    (44.4003687, -76.0183948),
    (44.4100852, -76.5972144),
    (44.4141301, -79.6771963),
    (44.4142686, -79.7134248),
    (44.4154352, -80.0946167),
    (44.4212198, -78.2705622),
    (44.4233998, -81.39858),
    (44.4290003, -79.1553145),
    (44.4307919, -78.1377099),
    (44.4332102, -77.8826929),
    (44.4740283, -76.2380099),
    (44.4751945, -80.07473),
    (44.4799461, -77.3142305),
    (44.483265, -77.6830094),
    (44.4878802, -76.9943448),
    (44.4966607, -81.3731305),
    (44.502783, -80.2182734),
    (44.5043518, -80.3127735),
    (44.5101128, -77.4782778),
    (44.5216204, -80.0207646),
    (44.5358774, -78.5413588),
    (44.5375204, -78.7384281),
    (44.5448091, -79.1749931),
    (44.5569357, -78.3490952),
    (44.5618434, -78.9826525),
    (44.5649386, -80.4597177),
    (44.5740281, -80.9265128),
    (44.5853738, -79.8649665),
    (44.5875336, -75.6875123),
    (44.607463, -80.5931823),
    (44.6097313, -79.4389173),
    (44.6104642, -79.413548),
    (44.6117488, -76.2281258),
    (44.61205, -76.1210008),
    (44.614976, -75.6830303),
    (44.6262132, -75.9508557),
    (44.6301875, -81.2632076),
    (44.6583331, -78.798818),
    (44.6791875, -76.3961916),
    (44.6986094, -76.1889633),
    (44.7061976, -79.6433687),
    (44.7079623, -75.5163893),
    (44.7289674, -79.8728968),
    (44.7357184, -77.1597036),
    (44.7435561, -81.138707),
    (44.7498993, -79.7053734),
    (44.7508904, -78.0915079),
    (44.7509286, -79.7760152),
    (44.7533771, -79.3366363),
    (44.758529, -80.052759),
    (44.7659225, -79.9325612),
    (44.7843255, -78.6527456),
    (44.7882132, -75.3824591),
    (44.7970415, -76.6822907),
    (44.8046009, -79.7169055),
    (44.8495819, -75.3166029),
    (44.8616911, -77.8407322),
    (44.871071, -79.8171059),
    (44.8905819, -76.0297153),
    (44.9003191, -75.1836832),
    (44.9067508, -78.3804082),
    (44.9077064, -76.26500951),
    (44.9084806, -79.3700152),
    (44.91549, -75.8346999),
    (44.9265731, -78.7232385),
    (44.962282, -76.983946),
    (44.980806, -81.2516064),
    (45.016543, -79.615314),
    (45.0183847, -76.3651168),
    (45.0248405, -74.7461362),
    (45.025787, -74.705507),
    (45.0290727, -74.8948896),
    (45.0299296, -75.6305001),
    (45.0367882, -78.2226473),
    (45.0448042, -79.3268225),
    (45.0463643, -78.5075406),
    (45.08219, -77.85966),
    (45.0907911, -75.3613999),
    (45.1014975, -75.2365885),
    (45.1209107, -79.5789501),
    (45.1281328, -77.2667831),
    (45.1324289, -76.1184768),
    (45.1340913, -79.769823),
    (45.1413526, -74.4987591),
    (45.1480844, -79.1192836),
    (45.2026663, -75.8302892),
    (45.2234682, -75.6828415),
    (45.228428, -76.1934781),
    (45.2310282, -77.9363799),
    (45.2462097, -78.8935099),
    (45.2549993, -81.6624211),
    (45.2575329, -79.6400569),
    (45.2686171, -75.302537),
    (45.2687895, -75.7417355),
    (45.2706165, -75.7824874),
    (45.2720954, -75.931497),
    (45.2758849, -75.8745585),
    (45.2877095, -75.671785),
    (45.2883328, -74.855246),
    (45.294082, -76.7311378),
    (45.3001623, -74.6281299),
    (45.3006137, -75.8868669),
    (45.3079887, -75.08255),
    (45.3108116, -75.9199687),
    (45.3189534, -75.5956363),
    (45.3221542, -78.9941659),
    (45.33020064, -75.81675495),
    (45.3343292, -75.7278888),
    (45.3353935, -79.2031289),
    (45.343846, -80.03285),
    (45.3447137, -76.0379502),
    (45.3508168, -75.7584962),
    (45.358378, -75.9359343),
    (45.3662875, -75.6621336),
    (45.3700943, -75.7699465),
    (45.3853232, -75.6794691),
    (45.3864042, -75.7394057),
    (45.3885264, -74.906237),
    (45.3939683, -75.7490987),
    (45.3991492, -75.6858841),
    (45.4000529, -75.6248386),
    (45.4058019, -75.7230644),
    (45.4107006, -75.685376),
    (45.4110204, -75.6393263),
    (45.4114473, -75.6926399),
    (45.4197187, -75.6928621),
    (45.4217958, -76.3679835),
    (45.42533104, -75.69244428),
    (45.42629953, -75.63611828),
    (45.4289434, -75.6863821),
    (45.4311664, -75.156243),
    (45.4336285, -75.6086915),
    (45.4356848, -75.6618972),
    (45.439141, -75.6774625),
    (45.4556331, -75.4976158),
    (45.469773, -75.4553161),
    (45.4774136, -76.6566934),
    (45.4798882, -75.5373064),
    (45.4880614, -77.6802931),
    (45.4925044, -78.2383121),
    (45.5181363, -74.6526356),
    (45.5340657, -75.3056689),
    (45.5398043, -74.9916253),
    (45.5400718, -77.0861565),
    (45.5551914, -77.4161402),
    (45.555409, -79.2241106),
    (45.5563838, -74.8898312),
    (45.5909929, -74.5930005),
    (45.6099525, -79.4021823),
    (45.6275398, -76.8866358),
    (45.6450206, -79.8541213),
    (45.6647455, -79.6427016),
    (45.7360062, -76.8637504),
    (45.7446281, -81.8072442),
    (45.7703425, -79.3939187),
    (45.8206846, -77.0816018),
    (45.8369834, -79.3767961),
    (45.8867231, -77.2581187),
    (45.916191, -79.9859003),
    (45.918282, -82.464941),
    (45.9390034, -80.5827665),
    (45.9701447, -81.5116811),
    (45.9792139, -81.9256041),
    (46.076774, -79.359952),
    (46.1004014, -77.4885573),
    (46.1042173, -80.6324727),
    (46.1396504, -80.431005),
    (46.1864074, -82.9535151),
    (46.1939645, -82.343092),
    (46.2119581, -82.0770267),
    (46.2227347, -79.365295),
    (46.2357851, -79.1450187),
    (46.2559437, -83.5567195),
    (46.2643748, -81.7713219),
    (46.2725176, -79.4432702),
    (46.2770791, -83.2141621),
    (46.2927949, -84.0351356),
    (46.3012084, -83.7881587),
    (46.3128881, -79.4627604),
    (46.3167889, -78.7004781),
    (46.3305739, -79.4668684),
    (46.3626145, -80.4153435),
    (46.3663973, -79.9303954),
    (46.3863568, -82.647948),
    (46.4131896, -80.1289488),
    (46.4228947, -81.1434976),
    (46.4322828, -80.9035689),
    (46.4415158, -81.0045814),
    (46.4544105, -80.4158691),
    (46.4778581, -81.0674029),
    (46.4856379, -84.0710645),
    (46.4927462, -80.9908824),
    (46.494223, -80.8460545),
    (46.5001031, -80.9477832),
    (46.5120504, -84.336174),
    (46.5211515, -80.9424694),
    (46.53684948, -84.36539662),
    (46.5440458, -84.3179362),
    (46.5491737, -80.8761954),
    (46.5518418, -81.1171739),
    (46.5792264, -81.1982475),
    (46.6104547, -81.0073828),
    (46.6279426, -81.4035107),
    (46.7062168, -80.9219116),
    (46.7339116, -84.3491468),
    (47.0639215, -79.7900628),
    (47.3957039, -79.6860339),
    (47.4495585, -79.6318598),
    (47.5112794, -79.6715038),
    (47.7107043, -79.8247178),
    (47.7321074, -80.3382375),
    (47.8257716, -79.8741223),
    (47.842646, -83.4008196),
    (47.9957117, -84.7720658),
    (48.1522471, -80.036242),
    (48.2446832, -82.4417308),
    (48.3811849, -89.3065321),
    (48.4014404, -89.6145185),
    (48.401796, -89.2388201),
    (48.4378654, -89.2166368),
    (48.4518351, -89.2508958),
    (48.4763298, -81.3160763),
    (48.5321858, -80.4626777),
    (48.5903982, -85.2803732),
    (48.6130803, -93.3985055),
    (48.6321509, -93.8337574),
    (48.718446, -86.3807792),
    (48.7218924, -94.5707795),
    (48.7577819, -91.6205907),
    (48.76711, -80.6781831),
    (48.7825339, -87.1029793),
    (48.8080244, -87.2640099),
    (49.0127027, -88.2619664),
    (49.0637803, -81.0262159),
    (49.127241, -85.8269273),
    (49.2747007, -81.6255022),
    (49.343194, -82.1570241),
    (49.4163901, -91.6609098),
    (49.4191867, -82.4190118),
    (49.6020883, -87.9593996),
    (49.6112326, -83.259733),
    (49.689033, -83.6630213),
    (49.7156875, -94.7916573),
    (49.7259071, -86.9489706),
    (49.7618914, -94.5541376),
    (49.7677714, -94.4822841),
    (49.7807853, -86.5354476),
    (49.7845422, -92.8340607),
    (49.8565793, -93.3761252),
    (50.0983469, -91.9152226),
    (50.1781109, -86.7102557),
    (50.6378866, -93.2377294),
    (51.0184466, -93.8214629),
    (51.2741577, -80.6465513),
    (51.4657406, -90.1980467),
]

pygame.init()
WIDTH, HEIGHT = 400, 400
CENTER = (WIDTH // 2, HEIGHT // 2)
RADIUS = 150
screen = pygame.display.set_mode((WIDTH, HEIGHT))
pygame.display.set_caption("Booze Compass")
font = pygame.font.SysFont(None, 24)


store_lat, store_lon = stores[0]
# --- GPS Functions ---
def haversine(lat1, lon1, lat2, lon2):
    R = 6371000  # Earth radius in meters
    phi1 = math.radians(lat1)
    phi2 = math.radians(lat2)
    delta_phi = math.radians(lat2 - lat1)
    delta_lambda = math.radians(lon2 - lon1)

    a = math.sin(delta_phi / 2)**2 + \
        math.cos(phi1) * math.cos(phi2) * math.sin(delta_lambda / 2)**2

    c = 2 * math.atan2(math.sqrt(a), math.sqrt(1 - a))
    return R * c

def calculate_bearing(lat1, lon1, lat2, lon2):
    phi1 = math.radians(lat1)
    phi2 = math.radians(lat2)
    delta_lambda = math.radians(lon2 - lon1)

    x = math.sin(delta_lambda) * math.cos(phi2)
    y = math.cos(phi1) * math.sin(phi2) - \
        math.sin(phi1) * math.cos(phi2) * math.cos(delta_lambda)

    bearing = (math.degrees(math.atan2(x, y)) + 360) % 360
    return bearing

def find_closest_store(current_lat, current_lon, stores):
    closest_store = None
    min_distance = float('inf')
    
    for store in stores:
        distance = haversine(current_lat, current_lon, store[0], store[1])
        if distance < min_distance:
            min_distance = distance
            closest_store = store
    
    return closest_store

# --- Drawing Function ---
def draw_compass(current_heading_deg, target_bearing_deg, distance_to_store):
    screen.fill((30, 30, 30))

    pygame.draw.circle(screen, (200, 200, 200), CENTER, RADIUS, 2)

    for angle, label in zip([0, 90, 180, 270], ["N", "E", "S", "W"]):
        rad = math.radians(angle)
        x = CENTER[0] + math.sin(rad) * (RADIUS + 10)
        y = CENTER[1] - math.cos(rad) * (RADIUS + 10)
        text = font.render(label, True, (255, 255, 255))
        rect = text.get_rect(center=(x, y))
        screen.blit(text, rect)

    # Calculate the relative turn direction
    turn_angle = (target_bearing_deg - current_heading_deg) % 360
    turn_rad = math.radians(turn_angle)

    x = CENTER[0] + math.sin(turn_rad) * RADIUS
    y = CENTER[1] - math.cos(turn_rad) * RADIUS
    pygame.draw.line(screen, (0, 255, 0), CENTER, (x, y), 4)

    dist_text = font.render(f"Distance: {int(distance_to_store)} m", True, (255, 255, 255))
    screen.blit(dist_text, (10, 10))

    pygame.display.flip()

# --- Main Loop ---

def main():
    global heading, your_lat, your_lon, store_lat, store_lon
    
    # Find closest store
    closest_store = find_closest_store(your_lat, your_lon, stores)
    store_lat, store_lon = closest_store
    
    clock = pygame.time.Clock()
    running = True

    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        # Calculate target data
        bearing_to_store = calculate_bearing(your_lat, your_lon, store_lat, store_lon)
        distance_to_store = haversine(your_lat, your_lon, store_lat, store_lon)

        draw_compass(heading, bearing_to_store, distance_to_store)
        clock.tick(10)

    pygame.quit()

if __name__ == "__main__":
    main()